From: Julian Wiedmann <jwi@linux.ibm.com>
Date: Fri, 27 Mar 2020 12:00:42 +0100
Subject: s390/qeth: support net namespaces for L3 devices
Git-commit: b8f14878e6ae210cad4025bfc97dca877b4df721
Patch-mainline: v5.7-rc1
References: git-fixes

Enable the L3 driver's IPv4 address notifier to watch for events on qeth
devices that have been moved into a net namespace. We need to program
those IPs into the HW just as usual, otherwise inbound traffic won't
flow.

Fixes: 6133fb1aa137 ("[NETNS]: Disable inetaddr notifiers in namespaces other than initial.")
Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/s390/net/qeth_l3_main.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/s390/net/qeth_l3_main.c
+++ b/drivers/s390/net/qeth_l3_main.c
@@ -3306,9 +3306,6 @@ static int qeth_l3_ip_event(struct notif
 	struct qeth_ipaddr *addr;
 	struct qeth_card *card;
 
-	if (dev_net(dev) != &init_net)
-		return NOTIFY_DONE;
-
 	card = qeth_l3_get_card_from_dev(dev);
 	if (!card)
 		return NOTIFY_DONE;
